os: linux

sudo: required

services:
  - docker
  - postgresql

addons:
  postgresql: "10"
  apt:
    packages:
    - postgresql-10
    - postgresql-client-10

language: python

addons:
  apt:
    packages:
    # for docs
    - graphviz

install: pip install pytest psycopg2

before_script:
  - postmaster --version
  - psql -c "CREATE DATABASE mydb;" -U postgres
  - psql -c "CREATE USER test WITH PASSWORD 'test';" -U postgres

jobs:
  include:
  - python: "3.6"

script: 
  - python setup.py install
  - python scripts/conn.py
  - pytest


